---
title: "Test Rmd File"
author: "Daniel Allington"
date: "2026-02-10"
output: html_document
---

In this Rmd file, we develop and test basic bits of code.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

source('SampleSim/function-definitions.R')

library(dplyr)
```



Bib ref for complement function:

@MISC {313138,
    TITLE = {Generate a random variable with a defined correlation to an existing variable(s)},
    AUTHOR = {whuber (https://stats.stackexchange.com/users/919/whuber)},
    HOWPUBLISHED = {Cross Validated},
    NOTE = {URL:https://stats.stackexchange.com/q/313138 (version: 2021-01-14)},
    EPRINT = {https://stats.stackexchange.com/q/313138},
    URL = {https://stats.stackexchange.com/q/313138}
}

# Generating population
```{r}
population.p <- .1
population.N <- 10000

population <- c(
  rep(1, population.N * population.p), 
  rep(0, population.N * (1 - population.p)))
```

```{r, warning=FALSE}
tibble(
  Sample = c('Pop.', 1:10), 
  n = NA, 
  p = c(mean(population), rep(NA, 10))
  ) %>% 
  visualise.samples
```

# Collecting samples
```{r}
sample.size <- 1000

samples <- (1:10) %>%
  map_dbl(
    function(x) {
      mean(take.sample(population, sample.size, 0.15))
    }
  )
```

```{r}
tibble(
  Sample = c('Pop.', 1:length(samples)), 
  n = c(NA, rep(sample.size, length(samples))),
  p = c(mean(population), samples)
  ) %>%
  visualise.samples(
    include.mean = TRUE, population.line = TRUE, range.function = sdrange, confint = .90)
```

